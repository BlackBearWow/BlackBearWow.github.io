<html>
<head>
<style>
img{
	position: fixed;
	top: 0px;
	left: 0px;
	width: 40px;
	height:40px;
}
</style>
</head>

<body onload='start()'style='background:black; margin:0px;' >
<p id='pp' style='color:yellow; font-size:50px; padding:200px; text-shadow:5px 5px 5px red;'>Loading</p>
<p id='infor' style='color:red; font-size:20px; position:fixed; top:50px;'></p>
<img id='char'src='https://diotheworld.github.io/image/a.jpg' width='40px'>
<audio id="Sugar" src="https://diotheworld.github.io/Music/DanceOfTheSugarplumFairy.mp3"/>
<audio id="Fade" src="https://diotheworld.github.io/Music/Fade.mp3"/>
<audio id="Camp" src="https://diotheworld.github.io/Music/CAMP.mp3"/>
<audio id="balloonBoom" src="https://diotheworld.github.io/Music/sports-sound13.ogg"/>
<audio id="item" src="https://diotheworld.github.io/Music/아이템이다.mp3"/>
<audio id="balloonSet" src="https://diotheworld.github.io/Music/etc-sound0010.ogg"/>
<audio id="door" src="https://diotheworld.github.io/Music/문소리.mp3"/>
<audio id="levelUp" src="https://diotheworld.github.io/Music/렙업.wav"/>
<audio id="monsterdie" src="https://diotheworld.github.io/Music/monsterdie.swf.mp3"/>
<audio id="mapp" src="https://diotheworld.github.io/Music/커닝스퀘어.mp3"/>
<script>
var map={};
window.addEventListener('keydown',function(e){map[e.keyCode]=true;})
window.addEventListener('keyup',function(e){map[e.keyCode]=false;})
var oneBlock=40;
var exp=0;
var charLevel=1;
var halfBlock=oneBlock/2;
var x = [oneBlock*2, 1080];
var y = [oneBlock*1, 480];
var situation=0;<!--대화의 상황 순서-->
var dialogueSet=0;<!--0이라면 대화중이 아님.-->
var dialogueCount=-2;<!--대화중 필요한 변수-->
var dialogueNpc=0;<!--대화중인 npc-->
var sight=[3,3];<!--좌:0 상:1 우:2 하: 3-->
var backgroundx,backgroundy,charx,chary;
var backgroundCount=0;
var background=[
	new makeBackground("https://diotheworld.github.io/image/background1.png"),
	new makeBackground("https://diotheworld.github.io/image/다운로드.png"),
	new makeBackground("https://diotheworld.github.io/image/a.jpg"),
];
function makeBackground(source){
	this.image=document.createElement('img');
	this.image.src=source;
	document.body.appendChild(this.image);
	this.image.style.zIndex='-100';
	this.image.style.top=0;
	this.image.style.left=0;
	backgroundCount+=1;
	this.image.style.display='none';
}
var mw=new Array(background.length),mh=new Array(background.length);<!--mapwidth mapheight-->
var mwBlock=new Array(background.length),mhBlock=new Array(background.length);
mw[0]=4000;mh[0]=2000;
mw[1]=1600;mh[1]=1600;
mw[2]=1600;mh[2]=1600;
for(a=0;a<background.length;a++){
	mwBlock[a]=mw[a]/oneBlock; mhBlock[a]=mh[a]/oneBlock;
	background[a].image.style.width=mw[a];
	background[a].image.style.height=mh[a];
}
var mouseX, mouseY;
var mapCount=0;
function playMusic(id){
	var myAudio = document.getElementById(id); 
	if(myAudio.currentTime==0||myAudio.currentTime==myAudio.duration) { myAudio.play(); } 
}
function playMusic2(id){
	var myAudio = document.getElementById(id); 
	{ myAudio.load(); myAudio.play();} 
}
function aud_play_pause(id) { 
	var myAudio = document.getElementById(id); 
	if (myAudio.paused) { myAudio.play(); } 
	else { myAudio.pause(); } 
}
function aud_stop(id) { 
	var myAudio = document.getElementById(id); 
	{ myAudio.pause(); myAudio.load(); } 
}
var blockMap =new Array(2);
blockMap[0] = new Array(mhBlock[0]); <!-- map 0번째의 벽들 생성. 가로 102칸 세로 52칸.
// -1:벽 0:공중 101~107:아이템 1000대:npc들 10000:부술 수 있는장애물 10001:물풍선1p 20001:물풍선2p 30001:빌딩들 40001:맵 이동
// 0~999: 지나다닐 수 있는 공간 
for(var i=0;i<mhBlock[0];i++) blockMap[0][i] = new Array(mwBlock[0]);
for(var i=0;i<mhBlock[0];i++)
	for(var n=0;n<mwBlock[0];n++)
		blockMap[0][i][n]=0;
blockMap[1]=[
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,0,0,0,0,0,0,0,0,0,0,0,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,0,0,0,0,0,0,0,0,0,0,0,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,0,0,0,0,0,0,0,0,0,0,0,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,0,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,50000,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
[2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647,2147483647],
];
//가로:40세로:40

var mainChar=[
	[//원래캐릭터
		new makechar("https://diotheworld.github.io/image/left.png"),
		new makechar("https://diotheworld.github.io/image/back.png"),
		new makechar("https://diotheworld.github.io/image/right.png"),
		new makechar("https://diotheworld.github.io/image/front.png"),
		new makechar("https://diotheworld.github.io/image/물속.png")
	],
	[//2p 캐릭터
		new makechar("https://diotheworld.github.io/image/left.png"),
		new makechar("https://diotheworld.github.io/image/back.png"),
		new makechar("https://diotheworld.github.io/image/right.png"),
		new makechar("https://diotheworld.github.io/image/front.png"),
		new makechar("https://diotheworld.github.io/image/물속.png")
	]
];
function makechar(source){
	this.image=document.createElement('img');
	this.image.src=source;
	document.body.appendChild(this.image);
	this.image.style.zIndex='-2';
	this.image.style.width='40px';
	this.image.style.height='40px';
	this.image.style.display='none';
}
var obstacleMap=new Array(background.length); //장애물: 1칸씩이고 물풍선으로 파괴가능. 아이템도 나옴.
var buildingMap=new Array(background.length);	//빙딩들: 1칸이 아니고 물풍선으로 파괴 불가능.
var npcMap=new Array(background.length);	//npc들. 말을 걸 수 있음
var monsterMap=new Array(background.length);
//빌딩들
buildingMap[0]=[
	new makeBuilding("큰통",3,7,2,2,"https://diotheworld.github.io/image/tong.png"),
	new makeBuilding("시설1",8,8,9,3,"https://diotheworld.github.io/image/시설1.png"),
];
//빌딩 만들기
function makeBuilding(name,x,y,sizex,sizey,source){//겹치는 장애물 있으면 못만들어지게 만들어야됨.
	this.name=name;
	this.existence=1;
	this.x=x;
    this.y=y;
	this.sizex=sizex;
	this.sizey=sizey;
	this.state=0;
    this.image=document.createElement('img');
	document.body.appendChild(this.image);
    this.image.src=source;	//장애물 이미지
	this.image.style.width=sizex*oneBlock;
	this.image.style.height=sizey*oneBlock;
	this.image.style.zIndex='-99';
	if((x>=mwBlock[0])||(x<0)||(y>=mhBlock[0])||(y<0)||(blockMap[0][y][x]!=0)){
		this.existence=0;
		return;
	}
	for(a=0;a<sizey;a++)
		for(b=0;b<sizex;b++)
			blockMap[0][y+a][x+b]=30000;
}
//빌딩 그리기
function drawBuildings(){
if(buildingMap[mapCount]==undefined) return;
var a,b=buildingMap[0].length;
for(a=0;a<b;a++)
if(buildingMap[0][a].existence) {
buildingMap[0][a].image.style.left=backgroundx+(buildingMap[0][a].x)*oneBlock;
buildingMap[0][a].image.style.top=backgroundy+(buildingMap[0][a].y)*oneBlock;
}
}

//장애물들
obstacleMap[0] = [
	new makeObstacle("통",3,4,"https://diotheworld.github.io/image/tong.png"),
	new makeObstacle("통",3,6,"https://diotheworld.github.io/image/tong.png"),
	new makeObstacle("통",4,6,"https://diotheworld.github.io/image/tong.png"),
	new makeObstacle("통",6,4,"https://diotheworld.github.io/image/tong.png"),
	new makeObstacle("통",7,4,"https://diotheworld.github.io/image/tong.png"),
	new makeObstacle("통",6,6,"https://diotheworld.github.io/image/tong.png"),
	new makeObstacle("통",7,6,"https://diotheworld.github.io/image/tong.png"),
	new makeObstacle("통",6,7,"https://diotheworld.github.io/image/tong.png"),
	
	new makeObstacle("통",8,8,"https://diotheworld.github.io/image/tong.png"),
];
<!--장애물 만들기
function makeObstacle(name,x,y,source){//겹치는 장애물 있으면 못만들어지게 만들어야됨.
	this.name=name;
	this.existence=1;
	this.x=x;
    this.y=y;
	this.state=0;
	this.item=Math.floor(Math.random() * 6);
	this.image=new Array(2);
    this.image[0]=document.createElement('img');	//장애물 이미지
	this.image[1]=document.createElement('img');	//아이템 이미지
	for(a=0;a<2;a++){
		document.body.appendChild(this.image[a]);
		this.image[a].style.zIndex='-98';
		this.image[a].style.display='none';
	}
    this.image[0].src=source;
	if(this.item==0){ this.image[1].src="https://diotheworld.github.io/image/Item/Roller.png"; }//롤러스테이트
	if(this.item==1){ this.image[1].src="https://diotheworld.github.io/image/Item/Bubble.png"; }//물풍선
	if(this.item==2){ this.image[1].src="https://diotheworld.github.io/image/Item/Fluid.png"; }//물줄기
	this.itemExistence=(this.item<=2);
	if((x>=mwBlock[0])||(x<0)||(y>=mhBlock[0])||(y<0)||(blockMap[0][y][x]!=0)){
		this.existence=0;
		return;
	}
	blockMap[0][y][x]=10000;
}
//--장애물 그리기
function drawObstacles(){
if(obstacleMap[mapCount]==undefined) return;
var a,b=obstacleMap[0].length;
for(a=0;a<b;a++)
if(obstacleMap[0][a].existence){
obstacleMap[0][a].image[obstacleMap[0][a].state].style.left=backgroundx+(obstacleMap[0][a].x)*oneBlock;
obstacleMap[0][a].image[obstacleMap[0][a].state].style.top=backgroundy+(obstacleMap[0][a].y)*oneBlock;
}
}
<!--장애물, 아이템 물풍선에 맞았을 때
function obstacleBoom(a){
	if((obstacleMap[0][a].itemExistence==0)||(obstacleMap[0][a].state)){ obstacleMap[0][a].existence=0; blockMap[0][obstacleMap[0][a].y][obstacleMap[0][a].x]=0; }
	else{ obstacleMap[0][a].state=1; blockMap[0][obstacleMap[0][a].y][obstacleMap[0][a].x]=100+obstacleMap[0][a].item; }
}

var infor=document.getElementById('infor');
var b=document.getElementById('char');
b.style.top=-120;
b.style.left=-120;
b.style.zIndex="-2";

background[0].image.style.display='block';
for(a=0;a<obstacleMap[0].length;a++) obstacleMap[0][a].image[0].style.display='block';

function start(){
	blockMap[0][10][12]=50100;
	setInterval(update,0);
	window.addEventListener('keydown',function(e){ map[e.keyCode]=true; })
	window.addEventListener('keyup',function(e){ map[e.keyCode]=false; })
	document.getElementById("can").addEventListener('mousemove', function (e) { mouseX = e.offsetX; mouseY = e.offsetY; })
}
var preB=1;
function update(){
//배경음악 설정.
//if(mapCount==0) {playMusic("Camp");aud_stop("mapp");}
//else if(mapCount==1) {playMusic("mapp");aud_stop("Camp");}
//배경이미지 좌표 설정
if(x[0]<=document.body.clientWidth/2-halfBlock){ backgroundx=0; charx=x[0]; }
else if(x[0]>document.body.clientWidth/2-halfBlock&&x[0]<=mw[mapCount]-(document.body.clientWidth/2+halfBlock)){ backgroundx=-x[0]+document.body.clientWidth/2-halfBlock; charx=document.body.clientWidth/2-halfBlock; }
else if(x[0]>mw[mapCount]-(document.body.clientWidth/2+halfBlock)){ backgroundx=-mw[mapCount]+document.body.clientWidth; charx=x[0]-mw[mapCount]+document.body.clientWidth; }
if(y[0]<=document.body.clientHeight/2-halfBlock){ backgroundy=0; chary=y[0]; }
else if(y[0]>document.body.clientHeight/2-halfBlock&&y[0]<=mh[mapCount]-(document.body.clientHeight/2+halfBlock)){ backgroundy=-y[0]+document.body.clientHeight/2-halfBlock; chary=document.body.clientHeight/2-halfBlock; }
else if(y[0]>mh[mapCount]-(document.body.clientHeight/2+halfBlock)){ backgroundy=-mh[mapCount]+document.body.clientHeight; chary=y[0]-mh[mapCount]+document.body.clientHeight; }

if(map[37]) x[0]-=1;<!--좌-->
else if(map[39]) x[0]+=1;<!--우-->
if(map[38]) y[0]-=1;<!--상-->
else if(map[40]) y[0]+=1;<!--하-->

infor.innerHTML=mhBlock[1];
drawBuildings();
drawObstacles();
//a.style.top=backgroundy;a.style.left=backgroundx;
b.style.top=chary;b.style.left=charx;
}
</script>
</body>
</html>

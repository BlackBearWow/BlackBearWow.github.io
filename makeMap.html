<html>
<body style="background-color:black">
<center>
<canvas id="can" width="1200" height="800" style="border:10px solid #c3c3c3;  cursor:none;"/>
<p id="abb"></p>
</center>
<script>
var map={};
var mw=prompt("mw 가로 칸 개수");//가로
var mh=prompt("mh 세로 칸 개수");//세로
var can=document.getElementById("can");
var ctx=can.getContext("2d");
var abv=new Image();
abv.src="https://diotheworld.github.io/image/바닥.png";
var x=0,y=0;
var mouseX=0, mouseY=0;
var mouse=new Image();
mouse.src=("https://diotheworld.github.io/image/cursor.png");

window.addEventListener('keydown',function(e){ map[e.keyCode]=true; })
window.addEventListener('keyup',function(e){ map[e.keyCode]=false; })
document.getElementById("can").addEventListener('mousemove', function (e) { mouseX = e.offsetX; mouseY = e.offsetY; })
document.getElementById("can").addEventListener("onwheel", function(e) {x+=1;})
document.getElementById("can").addEventListener("mousedown", function(e) {
	blockMap[Math.floor((mouseY-y)/40)][Math.floor((mouseX-x)/40)]=0;
});
var blockMap=new Array(mh);
for(yy=0;yy<mh;yy++)
blockMap[yy]=new Array(mw);
for(yy=0;yy<mh;yy++)
for(xx=0;xx<mw;xx++)
blockMap[yy][xx]=10000;

function drawInformation(){
	ctx.font="30px Comic Sans MS";
	ctx.fillStyle = "red";
	ctx.fillText(x+' '+y+' '+mh+''+mh+'',10,50);
}
ctx.fillStyle = "black";
ctx.fillRect(0,0,1200,40);
ctx.fillRect(0,760,1200,40);
ctx.fillRect(0,0,80,800);
ctx.fillRect(1120,0,80,800);
var startInterval=setInterval(update,10);
function stop(){
	clearInterval(startInterval);
}
function update(){
if(map[37]) x-=4; else if(map[39]) x+=4;
if(map[38]) y-=4; else if(map[40]) y+=4;
ctx.fillStyle='#aaaaaa';
ctx.fillRect(0,0,1200,800);
for(yy=0;yy<mh;yy++)
for(xx=0;xx<mw;xx++){
	if(blockMap[yy][xx]==10000) 
		ctx.drawImage(abv,xx*40+x,yy*40+y,40,40);
	else if(blockMap[yy][xx]==0) {
		ctx.fillStyle="black";
		ctx.fillRect(xx*40+x,yy*40+y,40,40);
	}
}
drawInformation();
ctx.drawImage(mouse,mouseX,mouseY,30,30);
}
</script>
<button onclick="stop()">stop</button>
</body>
</html> 
